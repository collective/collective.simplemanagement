<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="collective.simplemanagement">

<metal:block fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<metal:content-core fill-slot="main">
  <div id="booking-view"
       tal:define="tags python:request.get('tags', [])">

    <h1 i18n:translate="">Booking listing</h1>
    <tal:tags condition="tags">
      <p class="documentByLine">
        <tal:u i18n:translate="">filtered by:</tal:u>
        <tal:tags repeat="tag tags">
          <em tal:content="tag"></em><tal:c condition="not:repeat/tag/end">,</tal:c>
        </tal:tags>
      </p>
    </tal:tags>

     <div id="all-bookings" class="booking"
         tal:define="all_bookings       python:context.bookings(tags=tags);
                     sm_macros          nocall:context/@@simpemanagement-macros;
                     total              python: len(all_bookings);
                     Batch              python: modules['Products.CMFPlone'].Batch;
                     b_size             python:20;
                     b_start            python:0;
                     b_start            request/b_start | b_start;
                     batch              python: Batch(all_bookings or [], b_size, int(b_start), orphan=1);
                     booking_list       batch">
       <table class="listing booking-list"
              tal:condition="booking_list">
         <thead>
           <tr>
             <th>&nbsp;</th>
             <th i18n:translate="">Date</th>
             <th i18n:translate="">Text</th>
             <th i18n:translate="">Time</th>
             <th i18n:translate="">Assignee</th>
           </tr>
         </thead>
         <tfoot>
           <tr>
             <td colspan="4"
                 i18n:translate="">Total found</td>
             <td tal:content="total"></td>
           </tr>
         </tfoot>
         <tbody>
           <tal:row repeat="booking_obj booking_list">
             <tal:wrapper define="booking python: view.info_for(booking_obj)">
               <tr tal:define="odd repeat/booking_obj/odd"
                   tal:attributes="class python: odd and 'odd' or 'even'">
                 <metal:bookings use-macro="sm_macros/booking-list-element" />
               </tr>
             </tal:wrapper>
           </tal:row>
         </tbody>
       </table>
       <div metal:use-macro="here/batch_macros/macros/navigation" />
    </div>

  </div>


</metal:content-core>

</body>
</html>
